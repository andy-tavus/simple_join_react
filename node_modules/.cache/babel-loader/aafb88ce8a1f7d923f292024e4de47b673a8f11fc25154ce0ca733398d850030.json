{"ast":null,"code":"var _jsxFileName = \"/Users/andywertner/Documents/dailyco/simple_join_react/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport DailyIframe from '@daily-co/daily-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [callFrame, setCallFrame] = useState(null);\n  const [participants, setParticipants] = useState([]);\n  const [error, setError] = useState(null);\n  const videoContainerRef = useRef(null);\n  useEffect(() => {\n    return () => {\n      // Clean up the call when component unmounts\n      if (callFrame) {\n        callFrame.destroy();\n      }\n    };\n  }, [callFrame]);\n  const joinRoom = async roomId => {\n    try {\n      if (callFrame) {\n        callFrame.destroy();\n      }\n      setError(null);\n      const daily = DailyIframe.createFrame(videoContainerRef.current, {\n        iframeStyle: {\n          width: '100%',\n          height: '100%',\n          border: 'none',\n          backgroundColor: 'transparent'\n        },\n        showLeaveButton: true\n      });\n\n      // Set up event handlers before joining\n      daily.on('participant-joined', event => {\n        console.log('Participant joined:', event.participant);\n        updateParticipants(daily);\n      });\n      daily.on('participant-left', () => {\n        updateParticipants(daily);\n      });\n      daily.on('participant-updated', () => {\n        updateParticipants(daily);\n      });\n      daily.on('error', error => {\n        console.error('Daily.co error:', error);\n        setError(error.errorMsg || 'An error occurred with the video call');\n      });\n\n      // Wait for the frame to be loaded\n      await daily.load();\n\n      // Join the room with proper error handling\n      await daily.join({\n        // Replace this URL with your actual Daily.co domain\n        url: `https://andywertner.daily.co/${roomId}`\n      });\n      setCallFrame(daily);\n    } catch (err) {\n      console.error('Error joining room:', err);\n      setError(err.message || 'Failed to join the room');\n    }\n  };\n  const updateParticipants = daily => {\n    try {\n      const participantData = daily.participants();\n      if (participantData) {\n        const participantList = Object.values(participantData);\n        setParticipants(participantList);\n      }\n    } catch (err) {\n      console.error('Error updating participants:', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter room ID\",\n        onKeyPress: e => e.key === 'Enter' && joinRoom(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => joinRoom(document.querySelector('input').value),\n        children: \"Join Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      style: {\n        color: 'red',\n        marginBottom: '10px'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      ref: videoContainerRef,\n      style: {\n        width: '800px',\n        height: '600px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"participants-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Participants (\", participants.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: participants.map(participant => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [participant.user_name || 'Guest', participant.local ? ' (You)' : '']\n        }, participant.session_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"NEz8s7g4ag7C5UWiNsQeEBtMSXc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","DailyIframe","jsxDEV","_jsxDEV","App","_s","callFrame","setCallFrame","participants","setParticipants","error","setError","videoContainerRef","destroy","joinRoom","roomId","daily","createFrame","current","iframeStyle","width","height","border","backgroundColor","showLeaveButton","on","event","console","log","participant","updateParticipants","errorMsg","load","join","url","err","message","participantData","participantList","Object","values","className","children","type","placeholder","onKeyPress","e","key","target","value","fileName","_jsxFileName","lineNumber","columnNumber","onClick","document","querySelector","style","color","marginBottom","ref","length","map","user_name","local","session_id","_c","$RefreshReg$"],"sources":["/Users/andywertner/Documents/dailyco/simple_join_react/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport DailyIframe from '@daily-co/daily-js';\n\nfunction App() {\n  const [callFrame, setCallFrame] = useState(null);\n  const [participants, setParticipants] = useState([]);\n  const [error, setError] = useState(null);\n  const videoContainerRef = useRef(null);\n\n  useEffect(() => {\n    return () => {\n      // Clean up the call when component unmounts\n      if (callFrame) {\n        callFrame.destroy();\n      }\n    };\n  }, [callFrame]);\n\n  const joinRoom = async (roomId) => {\n    try {\n      if (callFrame) {\n        callFrame.destroy();\n      }\n\n      setError(null);\n\n      const daily = DailyIframe.createFrame(videoContainerRef.current, {\n        iframeStyle: {\n          width: '100%',\n          height: '100%',\n          border: 'none',\n          backgroundColor: 'transparent',\n        },\n        showLeaveButton: true,\n      });\n\n      // Set up event handlers before joining\n      daily.on('participant-joined', (event) => {\n        console.log('Participant joined:', event.participant);\n        updateParticipants(daily);\n      });\n\n      daily.on('participant-left', () => {\n        updateParticipants(daily);\n      });\n\n      daily.on('participant-updated', () => {\n        updateParticipants(daily);\n      });\n\n      daily.on('error', (error) => {\n        console.error('Daily.co error:', error);\n        setError(error.errorMsg || 'An error occurred with the video call');\n      });\n\n      // Wait for the frame to be loaded\n      await daily.load();\n\n      // Join the room with proper error handling\n      await daily.join({\n        // Replace this URL with your actual Daily.co domain\n        url: `https://andywertner.daily.co/${roomId}`,\n      });\n\n      setCallFrame(daily);\n    } catch (err) {\n      console.error('Error joining room:', err);\n      setError(err.message || 'Failed to join the room');\n    }\n  };\n\n  const updateParticipants = (daily) => {\n    try {\n      const participantData = daily.participants();\n      if (participantData) {\n        const participantList = Object.values(participantData);\n        setParticipants(participantList);\n      }\n    } catch (err) {\n      console.error('Error updating participants:', err);\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <div className=\"controls\">\n        <input \n          type=\"text\" \n          placeholder=\"Enter room ID\" \n          onKeyPress={(e) => e.key === 'Enter' && joinRoom(e.target.value)}\n        />\n        <button onClick={(e) => joinRoom(document.querySelector('input').value)}>\n          Join Room\n        </button>\n      </div>\n      \n      {error && (\n        <div className=\"error-message\" style={{ color: 'red', marginBottom: '10px' }}>\n          {error}\n        </div>\n      )}\n      \n      <div className=\"video-container\" ref={videoContainerRef} style={{ width: '800px', height: '600px' }}></div>\n      \n      <div className=\"participants-list\">\n        <h3>Participants ({participants.length})</h3>\n        <ul>\n          {participants.map((participant) => (\n            <li key={participant.session_id}>\n              {participant.user_name || 'Guest'} \n              {participant.local ? ' (You)' : ''}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}